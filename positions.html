<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CHINESE OPEN SCIENCE NETWORK</title>
  <!-- MDB icon -->
  <link rel="icon" href="img/mdb-favicon.ico" type="image/x-icon">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
  <link rel="stylesheet" href="css/google_fonts.css">
  <!-- Google Fonts Roboto -->
<!--   <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
  /> -->
  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <!-- MDB -->
  <link rel="stylesheet" href="css/mdb.min.css" />

  <link rel="stylesheet" href="css/mermaid.min.css" />
  <!-- Custom styles -->
  <link rel="stylesheet" href="css/custom.css" />
  <style>
  </style>
</head>
<body>
<header>

  <nav class="navbar navbar-expand-lg navbar-dark bg-primary text-white mb-4">
    <a class="navbar-brand" href="index.html">
      <img
        src="img/logo_w.png"
        height="50"
        alt=""
        loading="lazy"
      />
    </a>
    <!-- Toggle button -->
    <button
      class="navbar-toggler"
      type="button"
      data-mdb-toggle="collapse"
      data-mdb-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link text-white" href="index.html">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="index.html#Members">Members</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="https://github.com/Chinese-Open-Science-Network/site/issues" target="_blank">Articles</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="https://github.com/Chinese-Open-Science-Network/site/labels/Resources" target="_blank">Resources</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="events.html">Events</a>
        </li>
        <li class="nav-item active">
          <a class="nav-link text-white" href="#">Positions</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="gathering.html">Gathering</a>
        </li>

      </ul>
      
      <button type="button" class="btn btn-outline-light btn-rounded btn-sm mr-2"><a href="http://addevent.open-sci.cn" target="_blank" class="text-white">Add event</a></button>
      <button type="button" class="btn btn-outline-light btn-rounded btn-sm mr-2"><a href="http://addposition.open-sci.cn" target="_blank" class="text-white">Add position</a></button>
      <button type="button" class="btn btn-outline-light btn-rounded btn-sm mr-5"><a href="http://addgathering.open-sci.cn" target="_blank" class="text-white">Add gathering</a></button>

      
    </div>
  </nav>

</header>

<div class="container mb-4">
 <div id="wrapper"></div>

</div>

<!-- Footer -->
<footer class="page-footer font-small blue pt-4 bg-primary text-white">

  <!-- Footer Links -->
  <div class="container-fluid text-center text-md-left">

    <!-- Grid row -->
    <div class="row">
      <!-- Grid column -->
      <div class="col-md-6 mt-md-0 mt-3">

        <!-- Content -->
        <h5 class="text-uppercase">CHINESE OPEN SCIENCE NETWORK</h5>
        <ul class="list-group list-group-horizontal d-flex justify-content-center">
          <li class="list-group-item border-0 bg-primary"><a target="_blank" href="https://github.com/Chinese-Open-Science-Network" class="nav-link text-white"><i class="fab fa-github"></i></a></li>
          <li class="list-group-item border-0 bg-primary"><a target="_blank" href="https://twitter.com/OpenScienceinC1" class="nav-link text-white"><i class="fab fa-twitter"></i></a></li>
          <li class="list-group-item border-0 bg-primary"><a target="_blank" href="https://www.youtube.com/channel/UC5M4-E8pkO4vJT9K7rT72Uw" class="nav-link text-white"><i class="fab fa-youtube"></i></a></li>
          <li class="list-group-item border-0 bg-primary"><a target="_blank" href="https://space.bilibili.com/252509184" class="nav-link text-white">Bilibili</a></li>
          <li class="list-group-item border-0 bg-primary"><a target="_blank" href="https://osf.io/9d7y4/" class="nav-link text-white">OSF</a></li>
        </ul>

      </div>
      <!-- Grid column -->

      <hr class="clearfix w-100 d-md-none pb-3">

      <!-- Grid column -->
      <div class="col-md-6 mb-md-0 mb-3">

        <!-- Links -->
        <h5 class="text-uppercase">Partners</h5>

        <ul class="list-group">
          <li class="list-group-item border-0 bg-primary">
            <a target="_blank" href="https://www.cos.io/" class="text-white">Center for Open Science</a>
          </li>
          <li class="list-group-item border-0 bg-primary">
            <a target="_blank" href="https://curatescience.org/" class="text-white">Curate Science</a>
          </li>
          <li class="list-group-item border-0 bg-primary">
            <a target="_blank" href="https://capbs.github.io/2020/" class="text-white">CAPBS 2020</a>
          </li>
        </ul>

      </div>
      <!-- Grid column -->

    </div>
    <!-- Grid row -->

  </div>
  <!-- Footer Links -->

  <!-- Copyright -->
  <div class="footer-copyright text-center py-3" style="color: rgba(255,255,255,0.6); background-color: rgba(0, 0, 0, 0.2)">
      The website is designed by: <a class="text-white" href="https://github.com/ray306" target="_blank">Jinbiao Yang</a> @ Chinese Open Science Network</a> </br> Â© 2020 Copyright:<a class="text-white" href="https://mdbootstrap.com/education/bootstrap/" target="_blank"> MDBootstrap.com </a> 
  </div>
  <!-- Copyright -->

</footer>
<!-- Footer -->

  <!-- jQuery -->
  <script type="text/javascript" src="js/jquery.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="js/mdb.min.js"></script>

  <script type="text/javascript" src="js/airtable.browser.js"></script>

  <script type="text/javascript" src="https://unpkg.com/gridjs"></script>

  <script>
    var Airtable = require('airtable');
    var base = new Airtable({apiKey: 'keyH8BSM9AqwRF3ci'}).base('app8DGX3kOX4zctv3');

    base('Table 1').select({
       maxRecords: 10,
       filterByFormula: "NOT({Status} = 'Close')",
       view: "Grid view",
       sort: [{field: "Created", direction: "desc"}]
     }).eachPage(function page(records, fetchNextPage) {
        const grid = new gridjs.Grid({

        columns: [
          { 
            name: 'Lab',
            attributes: (cell) => {
              return {
                'data-cell-content': cell,
                'style': 'font-weight: bolder'
              };
            }
          },
          { 
            name: 'Location',
            attributes: (cell) => {
              return {
                'data-cell-content': cell,
                'style': 'width: 80px'
              };
            }
          },
          { 
            name: 'Position',
            attributes: (cell) => {
              return {
                'data-cell-content': cell,
                'style': 'width: 80px'
              };
            }
          },
          { 
            name: 'Created',
            attributes: (cell) => {
              return {
                'data-cell-content': cell,
                'style': 'width: 80px'
              };
            }
          },
          { 
            name: 'URL',
            attributes: (cell) => {
              return {
                'data-cell-content': cell,
                'style': 'width: 50px'
              };
            }
          },
          'Detail'],

        data: records.map(row => [
          row.get('Lab'),
          row.get('Place'),
          row.get('Tags').join(", "),
          row.get('Created'),
          (row.get("URL")!=undefined ? gridjs.html('<a class="" href='+row.get("URL")+'>Link</a>') : ''),
          (row.get("Detail").length<200 ? row.get("Detail") : gridjs.html(row.get("Detail").slice(1,200)+'... <a class="btn btn-primary btn-sm" data-mdb-toggle="collapse" href="#more'+row.get("ID")+'" role="button" aria-expanded="false" aria-controls="more"> See More </a> <div class="collapse mt-3" id="more'+row.get("ID")+'">'+row.get("Detail").slice(200,)+'</div>')),
          ,
        ]),

          style: {
            th: {
              color: '#fff',
            },
          },

        pagination: true,
        sort: true,
        search: true,
        }).render(document.getElementById("wrapper"));

     }, function done(err) {
         if (err) { console.error(err); return; }
     });

  </script>
<!-- gridjs.html('<span class="overflow-auto">'+row.get('Detail')+'</span>'), -->
</body>
</html>
